# üìä –ê—É–¥–∏—Ç —Ä–∞–π–æ–Ω–æ–≤ –ø–æ –≥–æ—Ä–æ–¥–∞–º

**–î–∞—Ç–∞:** 2025-10-03  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ  
**–ü—Ä–æ–±–ª–µ–º—ã:** 1 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è

---

## üéØ –ò–†–ö–£–¢–°–ö - –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### ‚úÖ –û—Ç–ª–∏—á–Ω–∞—è –Ω–æ–≤–æ—Å—Ç—å!

**–ò—Ä–∫—É—Ç—Å–∫ –∏–º–µ–µ—Ç —Å–∞–º—É—é –¥–µ—Ç–∞–ª—å–Ω—É—é –≥–µ–æ–≥—Ä–∞—Ñ–∏—é –≤ —Å–∏—Å—Ç–µ–º–µ:**
- **654 —Ä–∞–π–æ–Ω–∞** - –º–∞–∫—Å–∏–º—É–º —Å—Ä–µ–¥–∏ –≤—Å–µ—Ö –≥–æ—Ä–æ–¥–æ–≤
- –í–∫–ª—é—á–∞–µ—Ç –≤—Å–µ —Ç–∏–ø—ã —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–π:
  - –ì–æ—Ä–æ–¥—Å–∫–∏–µ –æ–∫—Ä—É–≥–∞
  - –°–µ–ª—å—Å–∫–∏–µ –ø–æ—Å–µ–ª–µ–Ω–∏—è
  - –ú–∏–∫—Ä–æ—Ä–∞–π–æ–Ω—ã (–õ–µ–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–∏–π, –°–æ–ª–Ω–µ—á–Ω—ã–π, –£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç—Å–∫–∏–π –∏ –¥—Ä.)
  - –ö–≤–∞—Ä—Ç–∞–ª—ã (–æ—Ç 1-–≥–æ –¥–æ 278-–≥–æ)
  - –ñ–ö (–ò—Ä–∫—É—Ç—Å–∫-–°–∏—Ç–∏, –ê–∫–∞–¥–µ–º–∏–∫, –°–µ–º—å—è, –°–∏–±–∏—Ä—è–∫–æ–≤)
  - –°–ù–¢ –∏ –¥–∞—á–Ω—ã–µ —Ç–æ–≤–∞—Ä–∏—â–µ—Å—Ç–≤–∞
  - –ü—Ä–∏–ª–µ–≥–∞—é—â–∏–µ —Ä–∞–π–æ–Ω—ã –∏ –ø–æ—Å–µ–ª–µ–Ω–∏—è

### üìã –ü—Ä–∏–º–µ—Ä—ã —Ä–∞–π–æ–Ω–æ–≤ –ò—Ä–∫—É—Ç—Å–∫–∞:

**–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–µ —Ä–∞–π–æ–Ω—ã:**
- –õ–µ–Ω–∏–Ω—Å–∫–∏–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–π –æ–∫—Ä—É–≥
- –û–∫—Ç—è–±—Ä—å—Å–∫–∏–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–π –æ–∫—Ä—É–≥
- –ü—Ä–∞–≤–æ–±–µ—Ä–µ–∂–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–π –æ–∫—Ä—É–≥
- –°–≤–µ—Ä–¥–ª–æ–≤—Å–∫–∏–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–π –æ–∫—Ä—É–≥

**–ú–∏–∫—Ä–æ—Ä–∞–π–æ–Ω—ã:**
- –õ–µ–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–∏–π –º–∏–∫—Ä–æ—Ä–∞–π–æ–Ω
- –°–æ–ª–Ω–µ—á–Ω—ã–π –º–∏–∫—Ä–æ—Ä–∞–π–æ–Ω
- –£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç—Å–∫–∏–π –º–∏–∫—Ä–æ—Ä–∞–π–æ–Ω
- –ú–∏—Ä–Ω—ã–π –º–∏–∫—Ä–æ—Ä–∞–π–æ–Ω
- –û–ª–∏–º–ø–∏–π—Å–∫–∏–π –º–∏–∫—Ä–æ—Ä–∞–π–æ–Ω
- –Æ–±–∏–ª–µ–π–Ω—ã–π –º–∏–∫—Ä–æ—Ä–∞–π–æ–Ω

**–ñ–∏–ª—ã–µ –∫–æ–º–ø–ª–µ–∫—Å—ã:**
- –ñ–ö –ò—Ä–∫—É—Ç—Å–∫-–°–∏—Ç–∏
- –ñ–∏–ª–æ–π –∫–æ–º–ø–ª–µ–∫—Å ¬´–ê–∫–∞–¥–µ–º–∏–∫¬ª
- –ñ–∏–ª–æ–π –∫–æ–º–ø–ª–µ–∫—Å ¬´–°–µ–º—å—è¬ª
- –ñ–∏–ª–æ–π –∫–æ–º–ø–ª–µ–∫—Å ¬´–°–∏–±–∏—Ä—è–∫–æ–≤¬ª
- –ñ–ö Botanica
- –ñ–ö "–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –ø–∞—Ä–∫"

**–ö–≤–∞—Ä—Ç–∞–ª—ã:**
- 1-–π –∫–≤–∞—Ä—Ç–∞–ª —á–µ—Ä–µ–∑ 278-–π –∫–≤–∞—Ä—Ç–∞–ª
- –ê–≤—Å—Ç—Ä–∏–π—Å–∫–∏–π –∫–≤–∞—Ä—Ç–∞–ª
- –ò—Å–ø–∞–Ω—Å–∫–∏–π –∫–≤–∞—Ä—Ç–∞–ª
- –ò—Ç–∞–ª—å—è–Ω—Å–∫–∏–π –∫–≤–∞—Ä—Ç–∞–ª
- –§–∏–Ω—Å–∫–∏–π –∫–≤–∞—Ä—Ç–∞–ª
- –ß–µ—à—Å–∫–∏–π –∫–≤–∞—Ä—Ç–∞–ª
- –ú–æ–ª–æ–¥—ë–∂–Ω—ã–π –∫–≤–∞—Ä—Ç–∞–ª

**–ü—Ä–∏–≥–æ—Ä–æ–¥—ã –∏ –ø–æ—Å—ë–ª–∫–∏:**
- –ë–µ—Ä—ë–∑–æ–≤—ã–π
- –ò—Ä–∫—É—Ç—Å–∫–∏–π —Ä–∞–π–æ–Ω
- –®–µ–ª–µ—Ö–æ–≤—Å–∫–∏–π —Ä–∞–π–æ–Ω
- –ê–Ω–≥–∞—Ä—Å–∫–∏–π –≥–æ—Ä–æ–¥—Å–∫–æ–π –æ–∫—Ä—É–≥
- –ò —Å–æ—Ç–Ω–∏ –¥—Ä—É–≥–∏—Ö –Ω–∞—Å–µ–ª—ë–Ω–Ω—ã—Ö –ø—É–Ω–∫—Ç–æ–≤

---

## üìä –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –≤—Å–µ–º –≥–æ—Ä–æ–¥–∞–º

### –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ—Ä–æ–¥–æ–≤ –∏ —Ä–∞–π–æ–Ω–æ–≤:

| –ü–æ–∫–∞–∑–∞—Ç–µ–ª—å | –ó–Ω–∞—á–µ–Ω–∏–µ |
|------------|----------|
| **–í—Å–µ–≥–æ –≥–æ—Ä–æ–¥–æ–≤** | 40 |
| **–ì–æ—Ä–æ–¥–æ–≤ —Å —Ä–∞–π–æ–Ω–∞–º–∏** | 39 ‚úÖ |
| **–ì–æ—Ä–æ–¥–æ–≤ –ë–ï–ó —Ä–∞–π–æ–Ω–æ–≤** | 1 ‚ùå |
| **–í—Å–µ–≥–æ —Ä–∞–π–æ–Ω–æ–≤ –≤ —Å–∏—Å—Ç–µ–º–µ** | 1,075 |

### üèÜ –¢–û–ü-3 –≥–æ—Ä–æ–¥–∞ –ø–æ –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏:

1. ü•á **–ò—Ä–∫—É—Ç—Å–∫** - 654 —Ä–∞–π–æ–Ω–∞ (–¥–µ—Ç–∞–ª—å–Ω–∞—è —Ä–∞–∑–±–∏–≤–∫–∞)
2. ü•à **–ú–æ—Å–∫–≤–∞** - 139 —Ä–∞–π–æ–Ω–æ–≤ (–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –æ–∫—Ä—É–≥–∞)
3. ü•â **–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥** - 111 —Ä–∞–π–æ–Ω–æ–≤ (–º—É–Ω–∏—Ü–∏–ø–∞–ª—å–Ω—ã–µ –æ–∫—Ä—É–≥–∞)

### –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ —Ç–∏–ø–∞–º:

- **–î–µ—Ç–∞–ª—å–Ω–∞—è –≥–µ–æ–≥—Ä–∞—Ñ–∏—è (100+ —Ä–∞–π–æ–Ω–æ–≤):** 3 –≥–æ—Ä–æ–¥–∞
  - –ò—Ä–∫—É—Ç—Å–∫ (654)
  - –ú–æ—Å–∫–≤–∞ (139)
  - –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥ (111)

- **"–ì–æ—Ä–æ–¥ —Ü–µ–ª–∏–∫–æ–º" (1 —Ä–∞–π–æ–Ω):** 36 –≥–æ—Ä–æ–¥–æ–≤
  - –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∫—Ä—É–ø–Ω—ã–µ –≥–æ—Ä–æ–¥–∞

- **–ë–µ–∑ —Ä–∞–π–æ–Ω–æ–≤ (0):** 1 –≥–æ—Ä–æ–¥ ‚ùå
  - –ö–∞–ª–∏–Ω–∏–Ω–≥—Ä–∞–¥

---

## ‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞

### –ö–∞–ª–∏–Ω–∏–Ω–≥—Ä–∞–¥ (ID: 40)

**–ü—Ä–æ–±–ª–µ–º–∞:** –ì–æ—Ä–æ–¥ –∞–∫—Ç–∏–≤–µ–Ω, –Ω–æ –Ω–µ –∏–º–µ–µ—Ç –Ω–∏ –æ–¥–Ω–æ–≥–æ —Ä–∞–π–æ–Ω–∞!

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- –ó–∞–∫–∞–∑—ã –Ω–µ –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω—ã –º–∞—Å—Ç–µ—Ä–∞–º
- –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ (distribution) –±—É–¥–µ—Ç –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å –∑–∞–∫–∞–∑—ã
- –õ–æ–≥–∏—Å—Ç—É –ø—Ä–∏–¥—ë—Ç—Å—è –Ω–∞–∑–Ω–∞—á–∞—Ç—å –≤—Ä—É—á–Ω—É—é

**–†–µ—à–µ–Ω–∏–µ:**

```sql
-- –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Å–∫—Ä–∏–ø—Ç:
\i scripts/fix_kaliningrad_districts.sql

-- –ò–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –Ω–∞–ø—Ä—è–º—É—é:
INSERT INTO districts (city_id, name) 
VALUES (40, '–ì–æ—Ä–æ–¥ —Ü–µ–ª–∏–∫–æ–º')
ON CONFLICT DO NOTHING;
```

---

## üìã –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –≥–æ—Ä–æ–¥–æ–≤

### –ì–æ—Ä–æ–¥–∞ —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π –≥–µ–æ–≥—Ä–∞—Ñ–∏–µ–π:

| –ì–æ—Ä–æ–¥ | –†–∞–π–æ–Ω–æ–≤ | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|-------|---------|-------------|
| –ò—Ä–∫—É—Ç—Å–∫ | 654 | ‚úÖ –î–µ—Ç–∞–ª—å–Ω–∞—è —Ä–∞–∑–±–∏–≤–∫–∞ –≤–∫–ª—é—á–∞—è –ø—Ä–∏–≥–æ—Ä–æ–¥—ã |
| –ú–æ—Å–∫–≤–∞ | 139 | ‚úÖ –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –æ–∫—Ä—É–≥–∞ –∏ —Ä–∞–π–æ–Ω—ã |
| –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥ | 111 | ‚úÖ –ú—É–Ω–∏—Ü–∏–ø–∞–ª—å–Ω—ã–µ –æ–∫—Ä—É–≥–∞ |

### –ì–æ—Ä–æ–¥–∞ —Å –±–∞–∑–æ–≤–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π ("–ì–æ—Ä–æ–¥ —Ü–µ–ª–∏–∫–æ–º"):

–ê—Å—Ç—Ä–∞—Ö–∞–Ω—å, –ë–∞—Ä–Ω–∞—É–ª, –í–ª–∞–¥–∏–≤–æ—Å—Ç–æ–∫, –í–æ–ª–≥–æ–≥—Ä–∞–¥, –í–æ—Ä–æ–Ω–µ–∂, –ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥, –ò–∂–µ–≤—Å–∫, –ö–∞–∑–∞–Ω—å, –ö–µ–º–µ—Ä–æ–≤–æ, –ö–∏—Ä–æ–≤, –ö—Ä–∞—Å–Ω–æ–¥–∞—Ä, –ö—Ä–∞—Å–Ω–æ—è—Ä—Å–∫, –õ–∏–ø–µ—Ü–∫, –ú–∞—Ö–∞—á–∫–∞–ª–∞, –ù–∞–±–µ—Ä–µ–∂–Ω—ã–µ –ß–µ–ª–Ω—ã, –ù–∏–∂–Ω–∏–π –ù–æ–≤–≥–æ—Ä–æ–¥, –ù–æ–≤–æ–∫—É–∑–Ω–µ—Ü–∫, –ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫, –û–º—Å–∫, –û—Ä–µ–Ω–±—É—Ä–≥, –ü–µ–Ω–∑–∞, –ü–µ—Ä–º—å, –†–æ—Å—Ç–æ–≤ –Ω–∞ –î–æ–Ω—É, –†—è–∑–∞–Ω—å, –°–∞–º–∞—Ä–∞, –°–∞–Ω–∫—Ç –ü–µ—Ç–µ—Ä–±—É—Ä–≥ (–¥—É–±–ª–∏–∫–∞—Ç), –°–∞—Ä–∞—Ç–æ–≤, –¢–æ–ª—å—è—Ç—Ç–∏, –¢–æ–º—Å–∫, –¢—é–º–µ–Ω—å, –£–ª—å—è–Ω–æ–≤—Å–∫, –£—Ñ–∞, –•–∞–±–∞—Ä–æ–≤—Å–∫, –ß–µ–±–æ–∫—Å–∞—Ä—ã, –ß–µ–ª—è–±–∏–Ω—Å–∫, –Ø—Ä–æ—Å–ª–∞–≤–ª—å

### –ì–æ—Ä–æ–¥–∞ –ë–ï–ó —Ä–∞–π–æ–Ω–æ–≤ (—Ç—Ä–µ–±—É—é—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è):

- ‚ùå **–ö–∞–ª–∏–Ω–∏–Ω–≥—Ä–∞–¥** - 0 —Ä–∞–π–æ–Ω–æ–≤

---

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### üî• –°—Ä–æ—á–Ω–æ (HIGH):

1. **–ö–∞–ª–∏–Ω–∏–Ω–≥—Ä–∞–¥:** –î–æ–±–∞–≤–∏—Ç—å —Ä–∞–π–æ–Ω "–ì–æ—Ä–æ–¥ —Ü–µ–ª–∏–∫–æ–º"
   ```bash
   psql -U postgres -d field_service -f scripts/fix_kaliningrad_districts.sql
   ```

### üìà –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (MEDIUM):

2. **–ò—Ä–∫—É—Ç—Å–∫:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å –≤—Å–µ—Ö 654 —Ä–∞–π–æ–Ω–æ–≤
   - –í–æ–∑–º–æ–∂–Ω–æ –µ—Å—Ç—å –¥—É–±–ª–∏–∫–∞—Ç—ã
   - –í–æ–∑–º–æ–∂–Ω–æ –µ—Å—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è
   - –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∞—É–¥–∏—Ç –¥–∞–Ω–Ω—ã—Ö

3. **–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥:** –ï—Å—Ç—å –¥—É–±–ª–∏–∫–∞—Ç –≥–æ—Ä–æ–¥–∞ (id=2 –∏ id=5)
   - "–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥" (id=2) - 111 —Ä–∞–π–æ–Ω–æ–≤
   - "–°–∞–Ω–∫—Ç –ü–µ—Ç–µ—Ä–±—É—Ä–≥" (id=5) - 1 —Ä–∞–π–æ–Ω
   - –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –∏–ª–∏ –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –¥—É–±–ª–∏–∫–∞—Ç

### üéØ –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (LOW):

4. **–ö—Ä—É–ø–Ω—ã–µ –≥–æ—Ä–æ–¥–∞:** –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–π–æ–Ω–æ–≤ –¥–ª—è:
   - –ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫ (1.6 –º–ª–Ω –∂–∏—Ç–µ–ª–µ–π)
   - –ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥ (1.5 –º–ª–Ω –∂–∏—Ç–µ–ª–µ–π)
   - –ö–∞–∑–∞–Ω—å (1.3 –º–ª–Ω –∂–∏—Ç–µ–ª–µ–π)
   - –ù–∏–∂–Ω–∏–π –ù–æ–≤–≥–æ—Ä–æ–¥ (1.2 –º–ª–Ω –∂–∏—Ç–µ–ª–µ–π)
   - –ö—Ä–∞—Å–Ω–æ—è—Ä—Å–∫ (1.1 –º–ª–Ω –∂–∏—Ç–µ–ª–µ–π)

---

## ‚úÖ –í—ã–≤–æ–¥—ã

### –ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ:

1. ‚úÖ **–ò—Ä–∫—É—Ç—Å–∫** –∏–º–µ–µ—Ç –æ—Ç–ª–∏—á–Ω—É—é –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—é - 654 —Ä–∞–π–æ–Ω–∞
2. ‚úÖ 39 –∏–∑ 40 –≥–æ—Ä–æ–¥–æ–≤ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç
3. ‚úÖ –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—É—é –≥–µ–æ–≥—Ä–∞—Ñ–∏—é

### –¢—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è:

1. ‚ùå **–ö–∞–ª–∏–Ω–∏–Ω–≥—Ä–∞–¥** - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞, —Ç—Ä–µ–±—É–µ—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
2. ‚ö†Ô∏è –ï—Å—Ç—å –¥—É–±–ª–∏–∫–∞—Ç –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥–∞ –≤ –±–∞–∑–µ
3. ‚ö†Ô∏è –í–æ–∑–º–æ–∂–Ω–æ –∏–∑–±—ã—Ç–æ—á–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞–π–æ–Ω–æ–≤ –≤ –ò—Ä–∫—É—Ç—Å–∫–µ

### –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π:

```bash
# 1. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ö–∞–ª–∏–Ω–∏–Ω–≥—Ä–∞–¥ (–°–†–û–ß–ù–û)
psql -U postgres -d field_service -f scripts/fix_kaliningrad_districts.sql

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥—É–±–ª–∏–∫–∞—Ç—ã –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥–∞
SELECT id, name, is_active, COUNT(*) OVER (PARTITION BY name) 
FROM cities WHERE name ILIKE '%–ø–µ—Ç–µ—Ä–±—É—Ä–≥%';

# 3. –ê—É–¥–∏—Ç —Ä–∞–π–æ–Ω–æ–≤ –ò—Ä–∫—É—Ç—Å–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
SELECT name, COUNT(*) as cnt 
FROM districts 
WHERE city_id = 4 
GROUP BY name 
HAVING COUNT(*) > 1;
```

---

## üìä SQL –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

```sql
-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –≥–æ—Ä–æ–¥–æ–≤ –∏ –∏—Ö —Ä–∞–π–æ–Ω–æ–≤
SELECT 
    c.id,
    c.name AS city_name,
    c.is_active,
    COUNT(d.id) AS districts_count
FROM cities c
LEFT JOIN districts d ON d.city_id = c.id
GROUP BY c.id, c.name, c.is_active
ORDER BY districts_count DESC, c.name;

-- –ü–æ–∏—Å–∫ –≥–æ—Ä–æ–¥–æ–≤ –±–µ–∑ —Ä–∞–π–æ–Ω–æ–≤
SELECT id, name 
FROM cities c
WHERE is_active = true
  AND NOT EXISTS (
      SELECT 1 FROM districts d WHERE d.city_id = c.id
  );

-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –ò—Ä–∫—É—Ç—Å–∫—É
SELECT 
    '–í—Å–µ–≥–æ —Ä–∞–π–æ–Ω–æ–≤' as metric,
    COUNT(*) as value
FROM districts 
WHERE city_id = 4
UNION ALL
SELECT 
    '–¢–∏–ø–æ–≤ —Ä–∞–π–æ–Ω–æ–≤',
    COUNT(DISTINCT 
        CASE 
            WHEN name LIKE '%–º–∏–∫—Ä–æ—Ä–∞–π–æ–Ω%' THEN '–º–∏–∫—Ä–æ—Ä–∞–π–æ–Ω'
            WHEN name LIKE '%–∫–≤–∞—Ä—Ç–∞–ª%' THEN '–∫–≤–∞—Ä—Ç–∞–ª'
            WHEN name LIKE '%–æ–∫—Ä—É–≥%' THEN '–æ–∫—Ä—É–≥'
            WHEN name LIKE '%–°–ù–¢%' THEN '–°–ù–¢'
            WHEN name LIKE '%–ñ–ö%' THEN '–ñ–ö'
            ELSE '–¥—Ä—É–≥–æ–µ'
        END
    )
FROM districts 
WHERE city_id = 4;
```

---

**–°—Ç–∞—Ç—É—Å:** –ò—Ä–∫—É—Ç—Å–∫ ‚úÖ | –ö–∞–ª–∏–Ω–∏–Ω–≥—Ä–∞–¥ ‚ùå  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** HIGH  
**ETA:** 5 –º–∏–Ω—É—Ç (–ø—Ä–∏–º–µ–Ω–∏—Ç—å SQL —Å–∫—Ä–∏–ø—Ç)
