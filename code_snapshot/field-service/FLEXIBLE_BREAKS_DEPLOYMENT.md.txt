# –ì–∏–±–∫–∏–µ –ü–µ—Ä–µ—Ä—ã–≤—ã - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

## üìã –û–±–∑–æ—Ä –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ:

1. **–ì–∏–±–∫–∏–π –≤—ã–±–æ—Ä –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ—Ä—ã–≤–∞**: 15 –º–∏–Ω—É—Ç, 1 —á–∞—Å, 2 —á–∞—Å–∞
2. **–û–Ω–ª–∞–π–Ω-—Ç–∞–π–º–µ—Ä –ø–µ—Ä–µ—Ä—ã–≤–∞** –≤ –≥–ª–∞–≤–Ω–æ–º –º–µ–Ω—é
3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–Ω—è—Ç–∏–µ —Å–æ —Å–º–µ–Ω—ã** –ø–æ—Å–ª–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø–µ—Ä–µ—Ä—ã–≤–∞
4. **–ì–∏–±–∫–æ–µ –ø—Ä–æ–¥–ª–µ–Ω–∏–µ –ø–µ—Ä–µ—Ä—ã–≤–∞** —Å –≤—ã–±–æ—Ä–æ–º –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:

- –î–æ–±–∞–≤–ª–µ–Ω –Ω–æ–≤—ã–π watchdog `watchdog_expired_breaks` –¥–ª—è –∞–≤—Ç–æ—Å–Ω—è—Ç–∏—è —Å–æ —Å–º–µ–Ω—ã
- –û–±–Ω–æ–≤–ª–µ–Ω—ã –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã —Å –≤—ã–±–æ—Ä–æ–º –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –î–æ–±–∞–≤–ª–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–∞–π–º–µ—Ä–∞ –≤ –≥–ª–∞–≤–Ω–æ–º –º–µ–Ω—é
- –í—Å–µ —Ç–µ–∫—Å—Ç—ã –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω—ã –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Ä–∞–∑–Ω—ã—Ö –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π

---

## üîß –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### 1. Backend

- ‚úÖ `field_service/bots/master_bot/handlers/shift.py` - –ª–æ–≥–∏–∫–∞ –ø–µ—Ä–µ—Ä—ã–≤–æ–≤
- ‚úÖ `field_service/bots/master_bot/keyboards.py` - –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –≤—ã–±–æ—Ä–∞
- ‚úÖ `field_service/bots/master_bot/texts.py` - —Ç–µ–∫—Å—Ç—ã —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ `field_service/bots/master_bot/handlers/start.py` - —Ç–∞–π–º–µ—Ä –≤ –º–µ–Ω—é
- ‚úÖ `field_service/bots/master_bot/main.py` - –∑–∞–ø—É—Å–∫ watchdog
- ‚úÖ `field_service/services/watchdogs.py` - –Ω–æ–≤—ã–π watchdog –¥–ª—è –∞–≤—Ç–æ—Å–Ω—è—Ç–∏—è

### 2. Tests

- ‚úÖ `tests/test_watchdog_expired_breaks.py` - —Ç–µ—Å—Ç—ã watchdog

---

## üöÄ –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ

### 1. –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ (–ª–æ–∫–∞–ª—å–Ω–æ)

```powershell
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤ watchdog
$env:PYTHONIOENCODING='utf-8'
pytest tests/test_watchdog_expired_breaks.py -v -s

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞
pytest tests/test_watchdog_expired_breaks.py::test_watchdog_expired_breaks_basic -v -s
```

### 2. –î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä

```powershell
# 1. –ö–æ–ø–∏—Ä—É–µ–º –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä
.\upload_fixes.ps1

# 2. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º master-bot –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
$pass = ConvertTo-SecureString "owo?8x-YA@vRN*" -AsPlainText -Force
$cred = New-Object System.Management.Automation.PSCredential("root", $pass)
$s = New-SSHSession -ComputerName 217.199.254.27 -Credential $cred -AcceptKey

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ master-bot
Invoke-SSHCommand -SessionId $s.SessionId -Command "cd /opt/field-service && docker compose restart master-bot"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
Invoke-SSHCommand -SessionId $s.SessionId -Command "cd /opt/field-service && docker compose logs -f master-bot --tail=50"

Remove-SSHSession -SessionId $s.SessionId
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. ‚úÖ –ú–∞—Å—Ç–µ—Ä –º–æ–∂–µ—Ç –≤—ã–±—Ä–∞—Ç—å –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–µ—Ä–µ—Ä—ã–≤–∞ (15 –º–∏–Ω / 1 —á / 2 —á)
2. ‚úÖ –í –≥–ª–∞–≤–Ω–æ–º –º–µ–Ω—é –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ç–∞–π–º–µ—Ä –ø–µ—Ä–µ—Ä—ã–≤–∞
3. ‚úÖ –ü–æ—Å–ª–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø–µ—Ä–µ—Ä—ã–≤–∞ –º–∞—Å—Ç–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–Ω–∏–º–∞–µ—Ç—Å—è —Å–æ —Å–º–µ–Ω—ã
4. ‚úÖ –ú–æ–∂–Ω–æ –ø—Ä–æ–¥–ª–∏—Ç—å –ø–µ—Ä–µ—Ä—ã–≤ —Å –≤—ã–±–æ—Ä–æ–º –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
5. ‚úÖ –ó–∞ 10 –º–∏–Ω—É—Ç –¥–æ –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø—Ä–∏—Ö–æ–¥–∏—Ç –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ

---

## üìä –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è

### Watchdog `watchdog_expired_breaks`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–Ω–∏–º–∞–µ—Ç –º–∞—Å—Ç–µ—Ä–æ–≤ —Å–æ —Å–º–µ–Ω—ã –ø–æ—Å–ª–µ –∏—Å—Ç–µ—á–µ–Ω–∏—è –ø–µ—Ä–µ—Ä—ã–≤–∞

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
- –ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏: 60 —Å–µ–∫—É–Ω–¥
- –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ `master_bot/main.py` –∫–∞–∫ background –∑–∞–¥–∞—á–∞

**–õ–æ–≥–∏–∫–∞**:
```sql
UPDATE masters
SET 
    shift_status = 'SHIFT_OFF',
    is_on_shift = false,
    break_until = NULL
WHERE shift_status = 'BREAK'
  AND break_until IS NOT NULL
  AND break_until <= NOW()
```

### –¢–∞–π–º–µ—Ä –ø–µ—Ä–µ—Ä—ã–≤–∞

**–§—É–Ω–∫—Ü–∏—è**: `_format_break_time_left(break_until: datetime) -> str`

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞**:
- `‚è∞ –ü–µ—Ä–µ—Ä—ã–≤ –¥–æ 14:30 (–æ—Å—Ç–∞–ª–æ—Å—å 45 –º–∏–Ω)`
- `‚è∞ –ü–µ—Ä–µ—Ä—ã–≤ –¥–æ 16:15 (–æ—Å—Ç–∞–ª–æ—Å—å 1 —á 25 –º–∏–Ω)`
- `‚è∞ –ü–µ—Ä–µ—Ä—ã–≤ –∑–∞–∫–æ–Ω—á–∏–ª—Å—è`

**–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: –¢–∞–π–º–µ—Ä –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –≤–æ–∑–≤—Ä–∞—Ç–µ –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é

### –ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã

**break_duration_keyboard(extend_mode: bool)**

–†–µ–∂–∏–º—ã:
- `extend_mode=False`: –ù–∞—á–∞–ª–æ –ø–µ—Ä–µ—Ä—ã–≤–∞ (`m:sh:brk:15m`, `m:sh:brk:1h`, `m:sh:brk:2h`)
- `extend_mode=True`: –ü—Ä–æ–¥–ª–µ–Ω–∏–µ –ø–µ—Ä–µ—Ä—ã–≤–∞ (`m:sh:brk:ext:15m`, `m:sh:brk:ext:1h`, `m:sh:brk:ext:2h`)

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ù–∞—á–∞–ª–æ –ø–µ—Ä–µ—Ä—ã–≤–∞

1. –ú–∞—Å—Ç–µ—Ä –Ω–∞ —Å–º–µ–Ω–µ
2. –ù–∞–∂–∏–º–∞–µ—Ç "‚òï –ü–µ—Ä–µ—Ä—ã–≤"
3. –í–∏–¥–∏—Ç –≤—ã–±–æ—Ä: 15 –º–∏–Ω / 1 —á / 2 —á
4. –í—ã–±–∏—Ä–∞–µ—Ç –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
5. –ü–æ–ª—É—á–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ: "–ü–µ—Ä–µ—Ä—ã–≤ –Ω–∞ X –Ω–∞—á–∞—Ç"
6. –í –≥–ª–∞–≤–Ω–æ–º –º–µ–Ω—é –≤–∏–¥–∏—Ç —Ç–∞–π–º–µ—Ä

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ü—Ä–æ–¥–ª–µ–Ω–∏–µ –ø–µ—Ä–µ—Ä—ã–≤–∞

1. –ú–∞—Å—Ç–µ—Ä –Ω–∞ –ø–µ—Ä–µ—Ä—ã–≤–µ
2. –ó–∞ 10 –º–∏–Ω—É—Ç –¥–æ –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø–æ–ª—É—á–∞–µ—Ç –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ
3. –ù–∞–∂–∏–º–∞–µ—Ç "‚òï –ü—Ä–æ–¥–ª–∏—Ç—å –ø–µ—Ä–µ—Ä—ã–≤"
4. –í—ã–±–∏—Ä–∞–µ—Ç –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ–¥–ª–µ–Ω–∏—è
5. –ü–µ—Ä–µ—Ä—ã–≤ –ø—Ä–æ–¥–ª–µ–≤–∞–µ—Ç—Å—è –æ—Ç —Ç–µ–∫—É—â–µ–≥–æ –º–æ–º–µ–Ω—Ç–∞

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ê–≤—Ç–æ—Å–Ω—è—Ç–∏–µ —Å–æ —Å–º–µ–Ω—ã

1. –ú–∞—Å—Ç–µ—Ä –Ω–∞ –ø–µ—Ä–µ—Ä—ã–≤–µ
2. –í—Ä–µ–º—è –ø–µ—Ä–µ—Ä—ã–≤–∞ –∏—Å—Ç–µ–∫–∞–µ—Ç
3. Watchdog –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
   - –°–Ω–∏–º–∞–µ—Ç –º–∞—Å—Ç–µ—Ä–∞ —Å–æ —Å–º–µ–Ω—ã (shift_status = SHIFT_OFF)
   - –£–±–∏—Ä–∞–µ—Ç —Ñ–ª–∞–≥ is_on_shift = false
   - –û—á–∏—â–∞–µ—Ç break_until = NULL
4. –ú–∞—Å—Ç–µ—Ä –≤–∏–¥–∏—Ç –º–µ–Ω—é "–≤–Ω–µ —Å–º–µ–Ω—ã"

### –°—Ü–µ–Ω–∞—Ä–∏–π 4: –í–æ–∑–≤—Ä–∞—Ç –Ω–∞ —Å–º–µ–Ω—É –≤—Ä—É—á–Ω—É—é

1. –ú–∞—Å—Ç–µ—Ä –Ω–∞ –ø–µ—Ä–µ—Ä—ã–≤–µ (–≤—Ä–µ–º—è –µ—â—ë –Ω–µ –∏—Å—Ç–µ–∫–ª–æ)
2. –ù–∞–∂–∏–º–∞–µ—Ç "üü¢ –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ —Å–º–µ–Ω—É"
3. –ü–µ—Ä–µ—Ä—ã–≤ –æ—Ç–º–µ–Ω—è–µ—Ç—Å—è
4. –ú–∞—Å—Ç–µ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –Ω–∞ —Å–º–µ–Ω—É (shift_status = SHIFT_ON)

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –ø—Ä–∏–º–µ—á–∞–Ω–∏—è

### Timezone

- –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç UTC: `datetime.now(timezone.utc)`
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –≤ —Ç–∞–π–º–µ—Ä–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ HH:MM (–ª–æ–∫–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –±—É–¥–µ—Ç –ø–æ–∫–∞–∑–∞–Ω–æ –≤ UTC)

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- Watchdog –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ë–î –∫–∞–∂–¥—ã–µ 60 —Å–µ–∫—É–Ω–¥
- SQL UPDATE –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å —É—Å–ª–æ–≤–∏—è–º–∏, –º–∏–Ω–∏–º–∏–∑–∏—Ä—É—é—â–∏–º–∏ –Ω–∞–≥—Ä—É–∑–∫—É
- –ò–Ω–¥–µ–∫—Å—ã –Ω–∞ `shift_status` –∏ `break_until` –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –±—ã—Å—Ç—Ä—É—é –≤—ã–±–æ—Ä–∫—É

### –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

- –ò–∑–º–µ–Ω–µ–Ω–∏—è –æ–±—Ä–∞—Ç–Ω–æ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã
- –°—Ç–∞—Ä—ã–µ –ø–µ—Ä–µ—Ä—ã–≤—ã (–µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å –≤ –ë–î) –±—É–¥—É—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –ù–∏–∫–∞–∫–∏—Ö –º–∏–≥—Ä–∞—Ü–∏–π –ë–î –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è (–≤—Å–µ –ø–æ–ª—è —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç)

---

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **–¢–∞–π–º–µ—Ä –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏**
   - –¢—Ä–µ–±—É–µ—Ç –≤–æ–∑–≤—Ä–∞—Ç–∞ –≤ –º–µ–Ω—é –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
   - –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π (—Å–ª–æ–∂–Ω–æ, –º–æ–∂–µ—Ç —Å–ø–∞–º–∏—Ç—å)

2. **–ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å**
   - –í—Ä–µ–º—è –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ UTC
   - –î–ª—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å timezone –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—é

3. **–î—É–±–ª–∏–∫–∞—Ç—ã –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π**
   - `break_reminder_scheduler` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç in-memory –Ω–∞–±–æ—Ä –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è
   - –ü—Ä–∏ —Ä–µ—Å—Ç–∞—Ä—Ç–µ –±–æ—Ç–∞ –Ω–∞–±–æ—Ä –æ—á–∏—â–∞–µ—Ç—Å—è (–º–∞—Å—Ç–µ—Ä –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ)

---

## üìù –ß–µ–∫–ª–∏—Å—Ç —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è

- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã –ª–æ–∫–∞–ª—å–Ω–æ
- [ ] –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- [ ] –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å master-bot
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞—á–∞–ª–æ –ø–µ—Ä–µ—Ä—ã–≤–∞
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–¥–ª–µ–Ω–∏–µ –ø–µ—Ä–µ—Ä—ã–≤–∞
- [ ] –î–æ–∂–¥–∞—Ç—å—Å—è –æ–∫–æ–Ω—á–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–µ—Ä–µ—Ä—ã–≤–∞
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è –≤ –∞–≤—Ç–æ—Å–Ω—è—Ç–∏–∏ —Å–æ —Å–º–µ–Ω—ã
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–∞–π–º–µ—Ä–∞

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ master-bot:
   ```bash
   docker compose logs -f master-bot --tail=100
   ```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å watchdog –≤ live_log:
   ```bash
   docker compose exec postgres psql -U postgres -d field_service -c "SELECT * FROM live_log WHERE subsystem = 'watchdog' ORDER BY created_at DESC LIMIT 20;"
   ```

3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –º–∞—Å—Ç–µ—Ä–æ–≤ –Ω–∞ –ø–µ—Ä–µ—Ä—ã–≤–µ:
   ```bash
   docker compose exec postgres psql -U postgres -d field_service -c "SELECT id, full_name, shift_status, break_until FROM masters WHERE shift_status = 'BREAK';"
   ```

---

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è –º–∞—Å—Ç–µ—Ä–∞ –ø–æ–ª—É—á–∞—Ç:

- üéØ **–ì–∏–±–∫–æ—Å—Ç—å**: –≤—ã–±–æ—Ä –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ—Ä—ã–≤–∞ –ø–æ–¥ —Å–≤–æ–∏ –Ω—É–∂–¥—ã
- ‚è∞ **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å**: —Ç–∞–π–º–µ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–∫–æ–ª—å–∫–æ –æ—Å—Ç–∞–ª–æ—Å—å –¥–æ –∫–æ–Ω—Ü–∞
- üîÑ **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è**: –Ω–µ –Ω—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é —Å–Ω–∏–º–∞—Ç—å —Å–µ–±—è —Å–æ —Å–º–µ–Ω—ã
- üì± **–£–¥–æ–±—Å—Ç–≤–æ**: –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –∑–∞ 10 –º–∏–Ω—É—Ç –¥–æ –æ–∫–æ–Ω—á–∞–Ω–∏—è

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—é
