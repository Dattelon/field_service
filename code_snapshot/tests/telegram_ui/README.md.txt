# Telegram UI Testing

–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Telegram-–±–æ—Ç–æ–≤ —á–µ—Ä–µ–∑ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∫–ª–∏–µ–Ω—Ç.

## üéØ –ß—Ç–æ —ç—Ç–æ –¥–∞–µ—Ç

- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** –±–æ—Ç–æ–≤ –±–µ–∑ —Ä—É—á–Ω–æ–≥–æ –∫–ª–∏–∫–∞
- ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∞–ª—å–Ω–æ–≥–æ UI** (–∫–Ω–æ–ø–∫–∏, —Å–æ–æ–±—â–µ–Ω–∏—è, –ø–µ—Ä–µ—Ö–æ–¥—ã)
- ‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CI/CD** (–º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
- ‚úÖ **–ë—ã—Å—Ç—Ä–∞—è —Ä–µ–≥—Ä–µ—Å—Å–∏—è** –≤—Å–µ—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

## üìã –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –ü–æ–ª—É—á–µ–Ω–∏–µ API credentials

‚úÖ **–£–ñ–ï –°–î–ï–õ–ê–ù–û!** –í–∞—à–∏ credentials:
- `api_id`: 25078350
- `api_hash`: f544a1a9571728cc8a05a0113898e69

### 2. –ü–µ—Ä–≤–∏—á–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

–ó–∞–ø—É—Å—Ç–∏—Ç–µ **–û–î–ò–ù –†–ê–ó** —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:

```powershell
cd C:\ProjectF
python tests\telegram_ui\setup_client.py
```

**–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç:**
1. –°–∫—Ä–∏–ø—Ç –∑–∞–ø—Ä–æ—Å–∏—Ç –≤–∞—à –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (—Ñ–æ—Ä–º–∞—Ç: +79991234567)
2. Telegram –æ—Ç–ø—Ä–∞–≤–∏—Ç –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
3. –í–≤–µ–¥–µ—Ç–µ –∫–æ–¥ –∏–∑ SMS/Telegram
4. –ï—Å–ª–∏ –µ—Å—Ç—å 2FA - –≤–≤–µ–¥–µ—Ç–µ –ø–∞—Ä–æ–ª—å
5. –°–æ–∑–¥–∞—Å—Ç—Å—è —Ñ–∞–π–ª `test_session.session` —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–π —Å–µ—Å—Å–∏–µ–π

**–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –ø–æ–≤—Ç–æ—Ä–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ù–ï —Ç—Ä–µ–±—É–µ—Ç—Å—è!**

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```env
# –¢–µ–ª–µ—Ñ–æ–Ω —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞
TELEGRAM_TEST_PHONE=+79991234567

# Username –±–æ—Ç–æ–≤ (–±–µ–∑ @)
MASTER_BOT_USERNAME=your_master_bot
ADMIN_BOT_USERNAME=your_admin_bot
```

## üöÄ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

### –í—Å–µ —Ç–µ—Å—Ç—ã –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞ –º–∞—Å—Ç–µ—Ä–∞
```powershell
cd C:\ProjectF
pytest tests\telegram_ui\test_master_onboarding.py -v
```

### –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–µ—Å—Ç
```powershell
pytest tests\telegram_ui\test_master_onboarding.py::test_master_start_command -v
```

### –° –≤—ã–≤–æ–¥–æ–º –ª–æ–≥–æ–≤
```powershell
pytest tests\telegram_ui\test_master_onboarding.py -v -s
```

## üìù –ù–∞–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤

### –ë–∞–∑–æ–≤—ã–π —à–∞–±–ª–æ–Ω

```python
import pytest
from tests.telegram_ui.bot_client import BotTestClient
from tests.telegram_ui.config import MASTER_BOT_USERNAME

@pytest.mark.asyncio
async def test_my_scenario():
    async with BotTestClient() as client:
        # –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É
        message = await client.send_command(MASTER_BOT_USERNAME, "/start")
        
        # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—Å—Ç
        client.assert_text_in_message("–û–∂–∏–¥–∞–µ–º—ã–π —Ç–µ–∫—Å—Ç", message)
        
        # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–Ω–æ–ø–∫–∏
        client.assert_has_buttons(["–ö–Ω–æ–ø–∫–∞ 1", "–ö–Ω–æ–ø–∫–∞ 2"], message)
        
        # –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É
        message = await client.click_button("–ö–Ω–æ–ø–∫–∞ 1", MASTER_BOT_USERNAME)
```


### –î–æ—Å—Ç—É–ø–Ω—ã–µ –º–µ—Ç–æ–¥—ã BotTestClient

```python
# –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–º–∞–Ω–¥
await client.send_command(bot_username, "/start")
await client.send_command(bot_username, "–õ—é–±–æ–π —Ç–µ–∫—Å—Ç")

# –ö–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–∞–º
await client.click_button("–¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏", bot_username)

# –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
message = await client.get_last_message(bot_username)

# –ü—Ä–æ–≤–µ—Ä–∫–∏
client.assert_text_in_message("–ò—Å–∫–æ–º—ã–π —Ç–µ–∫—Å—Ç")
client.assert_has_buttons(["–ö–Ω–æ–ø–∫–∞ 1", "–ö–Ω–æ–ø–∫–∞ 2"])
```

## üõ† Troubleshooting

### "–§–∞–π–ª —Å–µ—Å—Å–∏–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω"
**–†–µ—à–µ–Ω–∏–µ:** –ó–∞–ø—É—Å—Ç–∏—Ç–µ `python tests\telegram_ui\setup_client.py`

### "–ö–Ω–æ–ø–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
**–ü—Ä–∏—á–∏–Ω–∞:** –¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ —É–∫–∞–∑–∞–Ω –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ (—É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Ä–µ–≥–∏—Å—Ç—Ä –∏ —ç–º–æ–¥–∑–∏)
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ—á–Ω—ã–π —Ç–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ –≤ –±–æ—Ç–µ, –≤–∫–ª—é—á–∞—è —ç–º–æ–¥–∑–∏

### "Timeout –ø—Ä–∏ –æ–∂–∏–¥–∞–Ω–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏—è"
**–ü—Ä–∏—á–∏–Ω–∞:** –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—Ç–∏–ª –∑–∞ 10 —Å–µ–∫—É–Ω–¥
**–†–µ—à–µ–Ω–∏–µ:** 
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –∑–∞–ø—É—â–µ–Ω –ª–∏ –±–æ—Ç
- –£–≤–µ–ª–∏—á—å—Ç–µ `MESSAGE_TIMEOUT` –≤ `config.py`

### "FloodWaitError"
**–ü—Ä–∏—á–∏–Ω–∞:** –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ Telegram API
**–†–µ—à–µ–Ω–∏–µ:** –ü–æ–¥–æ–∂–¥–∏—Ç–µ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è –∏–ª–∏ —É–≤–µ–ª–∏—á—å—Ç–µ –∑–∞–¥–µ—Ä–∂–∫–∏ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
tests/telegram_ui/
‚îú‚îÄ‚îÄ README.md              # –≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ config.py              # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ (credentials, usernames)
‚îú‚îÄ‚îÄ setup_client.py        # –°–∫—Ä–∏–ø—Ç –ø–µ—Ä–≤–∏—á–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ bot_client.py          # Helper-–∫–ª–∞—Å—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–æ—Ç–∞–º–∏
‚îú‚îÄ‚îÄ test_master_onboarding.py  # –¢–µ—Å—Ç—ã –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞ –º–∞—Å—Ç–µ—Ä–∞
‚îî‚îÄ‚îÄ test_session.session   # –§–∞–π–ª —Å–µ—Å—Å–∏–∏ (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚ùå **–ù–ï –∫–æ–º–º–∏—Ç—å—Ç–µ** —Ñ–∞–π–ª `test_session.session` –≤ Git
- ‚ùå **–ù–ï –∫–æ–º–º–∏—Ç—å—Ç–µ** —Ñ–∞–π–ª `.env` —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **–æ—Ç–¥–µ–ª—å–Ω—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π –∞–∫–∫–∞—É–Ω—Ç** Telegram
- ‚úÖ –•—Ä–∞–Ω–∏—Ç–µ credentials –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

## üí° Best Practices

1. **–ò–∑–æ–ª—è—Ü–∏—è —Ç–µ—Å—Ç–æ–≤** - –∫–∞–∂–¥—ã–π —Ç–µ—Å—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–º
2. **Cleanup** - —Å–±—Ä–∞—Å—ã–≤–∞–π—Ç–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –±–æ—Ç–∞ –ø–µ—Ä–µ–¥/–ø–æ—Å–ª–µ —Ç–µ—Å—Ç–æ–≤
3. **–¢–∞–π–º–∞—É—Ç—ã** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–∞–∑—É–º–Ω—ã–µ —Ç–∞–π–º–∞—É—Ç—ã –æ–∂–∏–¥–∞–Ω–∏—è
4. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `-s` —Ñ–ª–∞–≥ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
5. **–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ** - —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ helper-—Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —á–∞—Å—Ç—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

## üìä –ü—Ä–∏–º–µ—Ä—ã —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

- ‚úÖ –û–Ω–±–æ—Ä–¥–∏–Ω–≥ –º–∞—Å—Ç–µ—Ä–∞ (–≤—ã–±–æ—Ä –≥–æ—Ä–æ–¥–∞, —Ä–∞–π–æ–Ω–∞, —Ç–µ–ª–µ—Ñ–æ–Ω)
- ‚úÖ –ü—Ä–∏–Ω—è—Ç–∏–µ/–æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞
- ‚úÖ –°–º–µ–Ω–∞ —Å—Ç–∞—Ç—É—Å–∞ –º–∞—Å—Ç–µ—Ä–∞ (—Ä–∞–±–æ—Ç–∞—é/–ø–µ—Ä–µ—Ä—ã–≤/–æ—Ñ–ª–∞–π–Ω)
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤
- ‚úÖ –ó–∞–∫—Ä—ã—Ç–∏–µ –∑–∞–∫–∞–∑–∞ –∏ –æ—Ü–µ–Ω–∫–∞
- ‚úÖ –†–∞–±–æ—Ç–∞ –∞–¥–º–∏–Ω-–±–æ—Ç–∞ (–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞, –º–æ–¥–µ—Ä–∞—Ü–∏—è)

## ü§ù –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤:
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `@pytest.mark.asyncio` –¥–ª—è async —Ñ—É–Ω–∫—Ü–∏–π
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ context manager (`async with BotTestClient()`)
3. –î–æ–±–∞–≤–ª—è–π—Ç–µ docstring —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º —Å—Ü–µ–Ω–∞—Ä–∏—è
4. –ì—Ä—É–ø–ø–∏—Ä—É–π—Ç–µ related —Ç–µ—Å—Ç—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã

---

**–í–æ–ø—Ä–æ—Å—ã?** –û–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ —Ç–∏–º–ª–∏–¥—É –ø—Ä–æ–µ–∫—Ç–∞.
