# ๐ค Field Service Control Bot

Telegram ะฑะพั ะดะปั ัะฟัะฐะฒะปะตะฝะธั ะฑะพัะฐะผะธ ะฝะฐ ะฟัะพะดะฐะบัะฝ ัะตัะฒะตัะต. **ะะฐะฑะพัะฐะตั ะฒ Docker ะบะพะฝัะตะนะฝะตัะต ะฝะฐ ัะตัะฒะตัะต 24/7.**

## ๐ฏ ะะพะทะผะพะถะฝะพััะธ

โ **ะะพะฝะธัะพัะธะฝะณ:**
- ะัะพะฒะตัะบะฐ ััะฐัััะฐ ะบะพะฝัะตะนะฝะตัะพะฒ
- ะัะพัะผะพัั ะปะพะณะพะฒ ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ
- ะัะพะฒะตัะบะฐ ะทะดะพัะพะฒัั ัะตัะฒะตัะฐ (ะดะธัะบ, ะฟะฐะผััั, heartbeat)

โ **ะฃะฟัะฐะฒะปะตะฝะธะต:**
- ะะฐะฟััะบ/ะพััะฐะฝะพะฒะบะฐ ะฑะพัะพะฒ
- ะะตัะตะทะฐะฟััะบ ะฑะพัะพะฒ
- ะะพะปะฝัะน ะดะตะฟะปะพะน ั ะฑัะบะฐะฟะพะผ

โ **ะะตะทะพะฟะฐัะฝะพััั:**
- ะะพัััะฟ ัะพะปัะบะพ ะดะปั ะฒะปะฐะดะตะปััะฐ (ะฟะพ Telegram ID)
- ะะฐะฑะพัะฐะตั ะฒ ะธะทะพะปะธัะพะฒะฐะฝะฝะพะผ Docker ะบะพะฝัะตะนะฝะตัะต
- SSH ัะพะตะดะธะฝะตะฝะธะต ะทะฐัะธัะตะฝะพ

## ๐ ะฃััะฐะฝะพะฒะบะฐ ะฝะฐ ัะตัะฒะตั (ะพะดะธะฝ ัะฐะท)

### ะะฒัะพะผะฐัะธัะตัะบะฐั ัััะฐะฝะพะฒะบะฐ (ะะะะะะะะะฃะะขะกะฏ)

```powershell
C:\ProjectF\install_control_bot.ps1
```

**ะกะบัะธะฟั ะฐะฒัะพะผะฐัะธัะตัะบะธ:**
- โ ะกะพะทะดะฐัั ะฐััะธะฒ control-bot
- โ ะะฐะณััะทะธั ะฝะฐ ัะตัะฒะตั
- โ ะกะพะฑะตััั Docker ะพะฑัะฐะท
- โ ะะฐะฟัััะธั ะบะพะฝัะตะนะฝะตั
- โ ะะฐัััะพะธั ะฐะฒัะพะทะฐะฟััะบ

### ะััะฝะฐั ัััะฐะฝะพะฒะบะฐ

```bash
# ะะฐ ัะตัะฒะตัะต
cd /opt
# ะะฐะณััะทะธัั control-bot ะดะธัะตะบัะพัะธั
tar -xzf control-bot.tar.gz
cd control-bot

# ะัะพะฒะตัะธัั .env ัะฐะนะป
nano .env
# ADMIN_ID ะดะพะปะถะตะฝ ะฑััั ัะฒะพะธะผ Telegram ID!

# ะกะพะฑัะฐัั ะธ ะทะฐะฟัััะธัั
docker compose build
docker compose up -d

# ะัะพะฒะตัะธัั ะปะพะณะธ
docker compose logs -f
```

## ๐ฑ ะัะฟะพะปัะทะพะฒะฐะฝะธะต

### ะ Telegram

1. ะะฐะนะดะธ ัะฒะพะตะณะพ ะฑะพัะฐ (ะธะผั ะธะท @BotFather)
2. ะัะฟัะฐะฒั `/start`
3. ะะพัะฒะธััั ะผะตะฝั ัะฟัะฐะฒะปะตะฝะธั

### ะะตะฝั ะบะฝะพะฟะพะบ

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ๐ ะกัะฐััั   โ   ๐ ะะพะณะธ    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ โถ๏ธ ะะฐะฟัััะธัั โ โธ๏ธ ะััะฐะฝะพะฒะธััโ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ๐ ะะตัะตะทะฐะฟัััะธัั โ ๐ฅ ะะดะพัะพะฒัะตโ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ       ๐ ะะตะฟะปะพะน             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

## ๐ฎ ะะพะผะฐะฝะดั

- **๐ ะกัะฐััั** - ะะพะบะฐะทะฐัั ััะฐััั ะฒัะตั ะบะพะฝัะตะนะฝะตัะพะฒ
- **๐ ะะพะณะธ** - ะะพัะปะตะดะฝะธะต 30 ัััะพะบ ะปะพะณะพะฒ (admin/master bot)
- **โถ๏ธ ะะฐะฟัััะธัั** - ะะฐะฟัััะธัั ะพะฑะฐ ะฑะพัะฐ
- **โธ๏ธ ะััะฐะฝะพะฒะธัั** - ะััะฐะฝะพะฒะธัั ะพะฑะฐ ะฑะพัะฐ
- **๐ ะะตัะตะทะฐะฟัััะธัั** - Graceful restart ะฑะพัะพะฒ
- **๐ฅ ะะดะพัะพะฒัะต** - ะะธัะบ, ะฟะฐะผััั, heartbeat
- **๐ ะะตะฟะปะพะน** - ะะพะปะฝัะน ะดะตะฟะปะพะน (ะฑัะบะฐะฟโัะฑะพัะบะฐโะผะธะณัะฐัะธะธโัะตััะฐัั)

## ๐ง ะฃะฟัะฐะฒะปะตะฝะธะต ะฝะฐ ัะตัะฒะตัะต

### ะัะพะฒะตัะธัั ััะฐััั

```bash
ssh root@217.199.254.27
cd /opt/control-bot
docker compose ps
```

### ะะพัะผะพััะตัั ะปะพะณะธ

```bash
docker compose logs -f
```

### ะะตัะตะทะฐะฟัััะธัั

```bash
docker compose restart
```

### ะััะฐะฝะพะฒะธัั

```bash
docker compose down
```

### ะะฐะฟัััะธัั

```bash
docker compose up -d
```

### ะะฑะฝะพะฒะธัั ะฑะพัะฐ

```bash
# ะััะฐะฝะพะฒะธัั
docker compose down

# ะะฐะณััะทะธัั ะฝะพะฒัะน ะบะพะด
# (ะธัะฟะพะปัะทัะน install_control_bot.ps1)

# ะะตัะตัะพะฑัะฐัั ะธ ะทะฐะฟัััะธัั
docker compose build
docker compose up -d
```

## ๐ ะัะธะผะตัั ะธัะฟะพะปัะทะพะฒะฐะฝะธั

### ะฃััะตะฝะฝัั ะฟัะพะฒะตัะบะฐ
1. ะัะบัััั ะฑะพัะฐ ะฒ Telegram
2. **๐ ะกัะฐััั** - ะฒัั ัะฐะฑะพัะฐะตั?
3. **๐ฅ ะะดะพัะพะฒัะต** - ัะตััััั ะฒ ะฟะพััะดะบะต?

### ะะตะฟะปะพะน ะฟะพัะปะต ัะฐะทัะฐะฑะพัะบะธ
1. **๐ ะะตะฟะปะพะน**
2. ะะพะดัะฒะตัะดะธัั
3. ะะพะดะพะถะดะฐัั 5 ะผะธะฝัั
4. **๐ ะกัะฐััั** + **๐ ะะพะณะธ**

### ะะธะฐะณะฝะพััะธะบะฐ ะฟัะพะฑะปะตะผ
1. **๐ ะะพะณะธ** - ะฝะฐะนัะธ ะพัะธะฑะบั
2. **๐ ะะตัะตะทะฐะฟัััะธัั** - ะฟะพะฟัะพะฑะพะฒะฐัั ะธัะฟัะฐะฒะธัั
3. **๐ฅ ะะดะพัะพะฒัะต** - ะฟัะพะฒะตัะธัั ัะตััััั

### ะะปะฐะฝะพะฒะพะต ะพะฑัะปัะถะธะฒะฐะฝะธะต
1. **โธ๏ธ ะััะฐะฝะพะฒะธัั** ะฑะพัั
2. (ัะฐะฑะพัะฐ ะฝะฐ ัะตัะฒะตัะต)
3. **โถ๏ธ ะะฐะฟัััะธัั** ะฑะพัั

## ๐ ะะพะฝะธัะพัะธะฝะณ

### ะะพะณะธ control-bot

```bash
ssh root@217.199.254.27
cd /opt/control-bot
docker compose logs -f
```

### ะัะพะฒะตัะบะฐ ััะพ ะฑะพั ัะฐะฑะพัะฐะตั

```bash
docker compose ps
# ะะพะปะถะตะฝ ะฑััั: fs_control_bot (running)
```

### Heartbeat

```bash
# ะะพัะปะตะดะฝะธะต ัะพะพะฑัะตะฝะธั ะพั ะฑะพัะฐ
docker compose logs --tail=20
```

## ๐ Troubleshooting

### ะะพั ะฝะต ะพัะฒะตัะฐะตั ะฒ Telegram

```bash
# ะัะพะฒะตัะธัั ััะพ ะบะพะฝัะตะนะฝะตั ะทะฐะฟััะตะฝ
docker compose ps

# ะะพัะผะพััะตัั ะปะพะณะธ ะฝะฐ ะพัะธะฑะบะธ
docker compose logs --tail=100

# ะัะพะฒะตัะธัั .env ัะฐะนะป
cat .env

# ะะตัะตะทะฐะฟัััะธัั
docker compose restart
```

### SSH ะพัะธะฑะบะธ

```bash
# ะัะพะฒะตัะธัั ััะพ SSH ัะฐะฑะพัะฐะตั ะฝะฐ ัะตัะฒะตัะต
systemctl status sshd

# ะัะพะฒะตัะธัั ะฟะฐัะพะปั ะฒ .env
cat .env | grep PASSWORD
```

### ะะตะฟัะฐะฒะธะปัะฝัะน ADMIN_ID

```bash
# ะฃะทะฝะฐัั ัะฒะพะน Telegram ID: @userinfobot
# ะะฑะฝะพะฒะธัั .env
nano .env
# ADMIN_ID=ัะฒะพะน_id

# ะะตัะตะทะฐะฟัััะธัั
docker compose restart
```

## ๐ฏ ะัะตะธะผััะตััะฒะฐ Docker ะทะฐะฟััะบะฐ

โ **ะัะตะณะดะฐ ัะฐะฑะพัะฐะตั** - ะบะพะฝัะตะนะฝะตั ะฟะตัะตะทะฐะฟััะบะฐะตััั ะฐะฒัะพะผะฐัะธัะตัะบะธ
โ **ะะทะพะปะธัะพะฒะฐะฝ** - ะฝะต ะฒะปะธัะตั ะฝะฐ ะดััะณะธะต ัะตัะฒะธัั
โ **ะะตะณะบะพ ะพะฑะฝะพะฒะปััั** - ะฟัะพััะพ ะฟะตัะตัะพะฑัะฐัั ะพะฑัะฐะท
โ **ะะพะณะธ ัะตะฝััะฐะปะธะทะพะฒะฐะฝั** - ัะตัะตะท docker compose logs
โ **ะะต ะฝัะถะตะฝ ะปะพะบะฐะปัะฝัะน Python** - ะฒัั ะฒ ะบะพะฝัะตะนะฝะตัะต

## ๐ ะกัััะบัััะฐ ัะฐะนะปะพะฒ

```
/opt/control-bot/
โโโ control_bot.py       # ะะพะด ะฑะพัะฐ
โโโ requirements.txt     # ะะฐะฒะธัะธะผะพััะธ Python
โโโ Dockerfile          # Docker ะพะฑัะฐะท
โโโ docker-compose.yml  # ะะพะฝัะธะณััะฐัะธั ะทะฐะฟััะบะฐ
โโโ .env               # ะะพะฝัะธะณััะฐัะธั (ัะพะบะตะฝั, ะฟะฐัะพะปะธ)
โโโ README.md          # ะญัะฐ ะดะพะบัะผะตะฝัะฐัะธั
```

## ๐ ะะตะทะพะฟะฐัะฝะพััั

- โ ะขะพะปัะบะพ ัั ะผะพะถะตัั ะธัะฟะพะปัะทะพะฒะฐัั (ะฟัะพะฒะตัะบะฐ ADMIN_ID)
- โ ะะฐัะพะปะธ ะฒ .env (ะฝะต ะฒ git)
- โ SSH ัะพะตะดะธะฝะตะฝะธะต ะทะฐัะธัะตะฝะพ
- โ ะะพะฝัะตะนะฝะตั ะธะทะพะปะธัะพะฒะฐะฝ
- โ ะะตั ะพัะบััััั ะฟะพััะพะฒ (ัะพะปัะบะพ SSH)

## ๐ ะะพะฝัะธะณััะฐัะธั

### .env ัะฐะนะป

```bash
BOT_TOKEN=8226969985:AAH_qXGdPKAEfKuQ-WHZZqaEgPBnzoiK8L0
ADMIN_ID=332786197              # ะขะะ Telegram ID!
SERVER_HOST=217.199.254.27      # IP ัะตัะฒะตัะฐ
SERVER_USER=root
SERVER_PASSWORD=owo?8x-YA@vRN*
```

**ะะะะะ:** ะะฑะฝะพะฒะธ ADMIN_ID ะฝะฐ ัะฒะพะน! ะฃะทะฝะฐะน ั @userinfobot ะฒ Telegram.

## ๐ ะกะพะฒะตัั

1. **ะะพะฑะฐะฒั ะฑะพัะฐ ะฒ ะธะทะฑัะฐะฝะฝะพะต** ะฒ Telegram ะดะปั ะฑััััะพะณะพ ะดะพัััะฟะฐ
2. **ะัะพะฒะตััะน ััะฐััั ัััะพะผ** ะฟะตัะตะด ะฝะฐัะฐะปะพะผ ัะฐะฑะพัั
3. **ะัะฟะพะปัะทัะน ะดะตะฟะปะพะน** ัะตัะตะท ะฑะพัะฐ ะฒะผะตััะพ ัะบัะธะฟัะพะฒ
4. **ะกะผะพััะธ ะปะพะณะธ** ะฟะพัะปะต ะบะฐะถะดะพะณะพ ะดะตะฟะปะพั
5. **Heartbeat** ะฟะพะบะฐะทัะฒะฐะตั ััะพ ะฑะพัั ะถะธะฒั

## ๐ ะกะฒัะทะฐะฝะฝัะต ัะบัะธะฟัั

- `install_control_bot.ps1` - ะฃััะฐะฝะพะฒะบะฐ ะฑะพัะฐ ะฝะฐ ัะตัะฒะตั
- `deploy_to_production.ps1` - ะะตะฟะปะพะน ัะตัะตะท PowerShell (ะฐะปััะตัะฝะฐัะธะฒะฐ)
- `check_server_health.ps1` - ะัะพะฒะตัะบะฐ ะทะดะพัะพะฒัั (ะฐะปััะตัะฝะฐัะธะฒะฐ)

## ๐ ะะพัะพะฒะพ!

ะขะตะฟะตัั ั ัะตะฑั ะตััั **ะฟะพะปะฝะพัะตะฝะฝัะน ัะฟัะฐะฒะปัััะธะน ะฑะพั** ะบะพัะพััะน ัะฐะฑะพัะฐะตั **24/7 ะฒ Docker** ะฝะฐ ัะตัะฒะตัะต!

**ะฃะฟัะฐะฒะปัะน production ะฑะพัะฐะผะธ ะธะท ะปัะฑะพะน ัะพัะบะธ ะผะธัะฐ ัะตัะตะท Telegram!** ๐

---

**ะะตััะธั**: 1.0  
**ะะฐัะฐ**: 10 ะพะบััะฑัั 2025  
**ะะพะบะฐัะธั**: Docker ะบะพะฝัะตะนะฝะตั ะฝะฐ /opt/control-bot
